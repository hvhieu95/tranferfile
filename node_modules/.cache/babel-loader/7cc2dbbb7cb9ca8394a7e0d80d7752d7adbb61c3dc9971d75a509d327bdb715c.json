{"ast":null,"code":"var _jsxFileName = \"D:\\\\rikkei\\\\bearcle\\\\React Typescript\\\\react-ts-file\\\\src\\\\contexts\\\\DraggableContext.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useContext, useState, createContext, useRef, useCallback } from \"react\";\n\n// context cho tính năng kéo thả\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst defaultDraggableValue = {\n  position: {\n    x: 0,\n    y: 0\n  },\n  handleStop: () => {}\n};\nconst DraggableContext = /*#__PURE__*/createContext(defaultDraggableValue);\n\n// custom hook để truy cập vào giá trị của Draggble context\nexport const useDraggble = () => {\n  _s();\n  return useContext(DraggableContext);\n};\n\n// component để chia sẻ logic và state liên quan tới kéo thả\n_s(useDraggble, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const DraggableProvider = ({\n  children\n}) => {\n  _s2();\n  const [position, setPosition] = useState({\n    x: 0,\n    y: 0\n  });\n  const canvasRef = useRef(null);\n\n  // hàm xử lý khi việc kéo kết thúc\n  const handleStop = useCallback((e, data) => {\n    if (canvasRef.current) {\n      const canvasRect = canvasRef.current.getBoundingClientRect();\n      const itemRect = e.target.getBoundingClientRect();\n\n      // kiểm tra xem hình có nằm ngoài canvas không\n      if (itemRect.left < canvasRect.left || itemRect.right > canvasRect.right || itemRect.top < canvasRect.top || itemRect.bottom > canvasRect.bottom) {\n        setPosition({\n          x: 0,\n          y: 0\n        });\n      }\n    }\n  }, [setPosition, canvasRef]);\n  return /*#__PURE__*/_jsxDEV(DraggableContext.Provider, {\n    value: {\n      position,\n      handleStop\n    },\n    children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 9\n  }, this);\n};\n_s2(DraggableProvider, \"wiDFbIBCoOJ592VCSYymvZ2Xshc=\");\n_c = DraggableProvider;\nvar _c;\n$RefreshReg$(_c, \"DraggableProvider\");","map":{"version":3,"names":["React","useContext","useState","createContext","useRef","useCallback","jsxDEV","_jsxDEV","defaultDraggableValue","position","x","y","handleStop","DraggableContext","useDraggble","_s","DraggableProvider","children","_s2","setPosition","canvasRef","e","data","current","canvasRect","getBoundingClientRect","itemRect","target","left","right","top","bottom","Provider","value","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/rikkei/bearcle/React Typescript/react-ts-file/src/contexts/DraggableContext.tsx"],"sourcesContent":["import React, { useContext, useState, createContext, useRef, useCallback } from \"react\";\r\n\r\n// context cho tính năng kéo thả\r\ntype DraggableContextType = {\r\n    position: { x: number, y: number }\r\n    handleStop: (e: React.DragEvent<HTMLDivElement>, data: any) => void\r\n  \r\n}\r\nconst defaultDraggableValue: DraggableContextType = {\r\n  position: { x: 0, y: 0 },\r\n  handleStop: () => {}\r\n};\r\n\r\nconst DraggableContext = createContext<DraggableContextType>(defaultDraggableValue);\r\n\r\n// custom hook để truy cập vào giá trị của Draggble context\r\nexport const useDraggble = () => {\r\n    return useContext(DraggableContext);\r\n};\r\n\r\n// component để chia sẻ logic và state liên quan tới kéo thả\r\ntype DraggableProviderProps={\r\n  children:React.ReactNode\r\n}\r\nexport const DraggableProvider = ({ children }: DraggableProviderProps) => {\r\n    const [position, setPosition] = useState({ x: 0, y: 0 });\r\n    const canvasRef = useRef<HTMLCanvasElement | null>(null);\r\n\r\n\r\n    // hàm xử lý khi việc kéo kết thúc\r\n    const handleStop = useCallback((e: React.DragEvent<HTMLDivElement>, data: any) => {\r\n        if (canvasRef.current) {\r\n            const canvasRect = canvasRef.current.getBoundingClientRect();\r\n            const itemRect = (e.target as HTMLElement).getBoundingClientRect();\r\n\r\n\r\n            // kiểm tra xem hình có nằm ngoài canvas không\r\n            if (\r\n                itemRect.left < canvasRect.left ||\r\n                itemRect.right > canvasRect.right ||\r\n                itemRect.top < canvasRect.top ||\r\n                itemRect.bottom > canvasRect.bottom\r\n            ) {\r\n                setPosition({ x: 0, y: 0 });\r\n            }\r\n        }\r\n    }, [setPosition, canvasRef]);\r\n\r\n    return (\r\n        <DraggableContext.Provider value={{ position, handleStop }}>\r\n            <canvas ref={canvasRef}>\r\n                {children}\r\n            </canvas>\r\n        </DraggableContext.Provider>\r\n    );\r\n};\r\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,QAAQ,EAAEC,aAAa,EAAEC,MAAM,EAAEC,WAAW,QAAQ,OAAO;;AAEvF;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAMA,MAAMC,qBAA2C,GAAG;EAClDC,QAAQ,EAAE;IAAEC,CAAC,EAAE,CAAC;IAAEC,CAAC,EAAE;EAAE,CAAC;EACxBC,UAAU,EAAEA,CAAA,KAAM,CAAC;AACrB,CAAC;AAED,MAAMC,gBAAgB,gBAAGV,aAAa,CAAuBK,qBAAqB,CAAC;;AAEnF;AACA,OAAO,MAAMM,WAAW,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC7B,OAAOd,UAAU,CAACY,gBAAgB,CAAC;AACvC,CAAC;;AAED;AAAAE,EAAA,CAJaD,WAAW;AAQxB,OAAO,MAAME,iBAAiB,GAAGA,CAAC;EAAEC;AAAiC,CAAC,KAAK;EAAAC,GAAA;EACvE,MAAM,CAACT,QAAQ,EAAEU,WAAW,CAAC,GAAGjB,QAAQ,CAAC;IAAEQ,CAAC,EAAE,CAAC;IAAEC,CAAC,EAAE;EAAE,CAAC,CAAC;EACxD,MAAMS,SAAS,GAAGhB,MAAM,CAA2B,IAAI,CAAC;;EAGxD;EACA,MAAMQ,UAAU,GAAGP,WAAW,CAAC,CAACgB,CAAkC,EAAEC,IAAS,KAAK;IAC9E,IAAIF,SAAS,CAACG,OAAO,EAAE;MACnB,MAAMC,UAAU,GAAGJ,SAAS,CAACG,OAAO,CAACE,qBAAqB,CAAC,CAAC;MAC5D,MAAMC,QAAQ,GAAIL,CAAC,CAACM,MAAM,CAAiBF,qBAAqB,CAAC,CAAC;;MAGlE;MACA,IACIC,QAAQ,CAACE,IAAI,GAAGJ,UAAU,CAACI,IAAI,IAC/BF,QAAQ,CAACG,KAAK,GAAGL,UAAU,CAACK,KAAK,IACjCH,QAAQ,CAACI,GAAG,GAAGN,UAAU,CAACM,GAAG,IAC7BJ,QAAQ,CAACK,MAAM,GAAGP,UAAU,CAACO,MAAM,EACrC;QACEZ,WAAW,CAAC;UAAET,CAAC,EAAE,CAAC;UAAEC,CAAC,EAAE;QAAE,CAAC,CAAC;MAC/B;IACJ;EACJ,CAAC,EAAE,CAACQ,WAAW,EAAEC,SAAS,CAAC,CAAC;EAE5B,oBACIb,OAAA,CAACM,gBAAgB,CAACmB,QAAQ;IAACC,KAAK,EAAE;MAAExB,QAAQ;MAAEG;IAAW,CAAE;IAAAK,QAAA,eACvDV,OAAA;MAAQ2B,GAAG,EAAEd,SAAU;MAAAH,QAAA,EAClBA;IAAQ;MAAAkB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACc,CAAC;AAEpC,CAAC;AAACpB,GAAA,CA/BWF,iBAAiB;AAAAuB,EAAA,GAAjBvB,iBAAiB;AAAA,IAAAuB,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}