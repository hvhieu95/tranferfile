{"ast":null,"code":"var _jsxFileName = \"D:\\\\rikkei\\\\bearcle\\\\React Typescript\\\\react-ts-file\\\\src\\\\components\\\\Canvas.tsx\",\n  _s = $RefreshSig$();\nimport { useDraggable } from \"../contexts/DraggableContext\";\nimport { DraggableItem } from \"./Generals/DraggableItem\";\nimport Draggable from \"react-draggable\";\nimport { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Canvas = () => {\n  _s();\n  const {\n    canvasItems: initialCanvasItems,\n    addItemToCanvas\n  } = useDraggable();\n  const [canvasItems, setCanvasItems] = useState(initialCanvasItems);\n  const handleDrop = e => {\n    e.preventDefault();\n    const type = e.dataTransfer.getData(\"type\");\n    const source = e.dataTransfer.getData(\"source\");\n    const canvasRect = e.currentTarget.getBoundingClientRect();\n    const position = {\n      x: e.clientX - canvasRect.left,\n      y: e.clientY - canvasRect.top\n    };\n    if (source === \"library\") {\n      addItemToCanvas({\n        type,\n        id: Date.now()\n      }, position);\n    }\n  };\n  const handleDragOver = e => {\n    e.preventDefault();\n  };\n  const updateItemPosition = (id, newPosition) => {\n    setCanvasItems(prevItems => {\n      return prevItems.map(item => {\n        if (item.id === id) {\n          return {\n            ...item,\n            position: newPosition\n          };\n        }\n        return item;\n      });\n    });\n  };\n  useEffect(() => {\n    setCanvasItems(initialCanvasItems);\n  }, [initialCanvasItems]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    onDrop: handleDrop,\n    onDragOver: handleDragOver,\n    style: {\n      border: \"1px solid black\",\n      minHeight: \"400px\",\n      position: \"relative\"\n    },\n    children: canvasItems.map(item => /*#__PURE__*/_jsxDEV(Draggable, {\n      position: {\n        x: item.position.x,\n        y: item.position.y\n      },\n      onStop: (e, data) => {\n        updateItemPosition(item.id, {\n          x: data.x,\n          y: data.y\n        });\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(DraggableItem, {\n          type: item.type,\n          id: item.id,\n          style: {\n            position: \"absolute\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }, this)\n    }, item.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n};\n_s(Canvas, \"G/E0C0E7sEAumpxuzWCfLrWizko=\", false, function () {\n  return [useDraggable];\n});\n_c = Canvas;\nvar _c;\n$RefreshReg$(_c, \"Canvas\");","map":{"version":3,"names":["useDraggable","DraggableItem","Draggable","useState","useEffect","jsxDEV","_jsxDEV","Canvas","_s","canvasItems","initialCanvasItems","addItemToCanvas","setCanvasItems","handleDrop","e","preventDefault","type","dataTransfer","getData","source","canvasRect","currentTarget","getBoundingClientRect","position","x","clientX","left","y","clientY","top","id","Date","now","handleDragOver","updateItemPosition","newPosition","prevItems","map","item","onDrop","onDragOver","style","border","minHeight","children","onStop","data","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/rikkei/bearcle/React Typescript/react-ts-file/src/components/Canvas.tsx"],"sourcesContent":["\r\nimport { useDraggable } from \"../contexts/DraggableContext\";\r\nimport { DraggableItem } from \"./Generals/DraggableItem\";\r\nimport { ShapeType } from \"../contexts/DraggableContext\";\r\nimport Draggable from \"react-draggable\";\r\nimport { useState, useEffect } from \"react\";\r\n\r\nexport const Canvas = () => {\r\n  const { canvasItems: initialCanvasItems, addItemToCanvas } = useDraggable();\r\n  const [canvasItems, setCanvasItems] = useState(initialCanvasItems);\r\n  \r\n  const handleDrop = (e: React.DragEvent<HTMLDivElement>) => {\r\n    e.preventDefault();\r\n    const type = e.dataTransfer.getData(\"type\") as ShapeType;\r\n    const source = e.dataTransfer.getData(\"source\");\r\n    const canvasRect = e.currentTarget.getBoundingClientRect();\r\n    const position = {\r\n      x: e.clientX - canvasRect.left,\r\n      y: e.clientY - canvasRect.top,\r\n    };\r\n    if (source === \"library\") {\r\n      addItemToCanvas({ type, id: Date.now() }, position);\r\n    }\r\n  };\r\n\r\n  const handleDragOver = (e: React.DragEvent<HTMLDivElement>) => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  const updateItemPosition = (\r\n    id: number,\r\n    newPosition: { x: number; y: number }\r\n  ) => {\r\n    setCanvasItems((prevItems) => {\r\n      return prevItems.map((item) => {\r\n        if (item.id === id) {\r\n          return { ...item, position: newPosition };\r\n        }\r\n        return item;\r\n      });\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    setCanvasItems(initialCanvasItems);\r\n  }, [initialCanvasItems]);\r\n\r\n  return (\r\n    <div\r\n      onDrop={handleDrop}\r\n      onDragOver={handleDragOver}\r\n      style={{\r\n        border: \"1px solid black\",\r\n        minHeight: \"400px\",\r\n        position: \"relative\",\r\n      }}\r\n    >\r\n      {canvasItems.map((item) => (\r\n        <Draggable\r\n          key={item.id}\r\n          position={{ x: item.position.x, y: item.position.y }}\r\n          onStop={(e, data) => {\r\n            updateItemPosition(item.id, { x: data.x, y: data.y });\r\n          }}\r\n        >\r\n          <div>\r\n            <DraggableItem\r\n              type={item.type}\r\n              id={item.id}\r\n              style={{ position: \"absolute\" }}\r\n            />\r\n          </div>\r\n        </Draggable>\r\n      ))}\r\n    </div>\r\n  );\r\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}